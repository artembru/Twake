import{_ as e,c as n,o as a,a as o}from"./app.73ebf130.js";const g=JSON.parse('{"title":"\u2699\uFE0F Server configuration","description":"More details about Twake configuration.","frontmatter":{"description":"More details about Twake configuration."},"headers":[{"level":3,"title":"Detach the configuration and start using your own","slug":"detach-the-configuration-and-start-using-your-own","link":"#detach-the-configuration-and-start-using-your-own","children":[]}],"relativePath":"onprem/configuration/index.md"}'),t={name:"onprem/configuration/index.md"},r=o(`<h1 id="\u2699\uFE0F-server-configuration" tabindex="-1">\u2699\uFE0F Server configuration <a class="header-anchor" href="#\u2699\uFE0F-server-configuration" aria-hidden="true">#</a></h1><h3 id="detach-the-configuration-and-start-using-your-own" tabindex="-1">Detach the configuration and start using your own <a class="header-anchor" href="#detach-the-configuration-and-start-using-your-own" aria-hidden="true">#</a></h3><p>Each configuration file is optional, if not given, Twake will fallback to default configuration.</p><h4 id="backend-configuration" tabindex="-1">Backend configuration <a class="header-anchor" href="#backend-configuration" aria-hidden="true">#</a></h4><p>You can find an example of Twake configuration (default configuration) here: <a href="https://github.com/TwakeApp/Twake/blob/main/twake/backend/node/config/default.json" target="_blank" rel="noreferrer">https://github.com/TwakeApp/Twake/blob/main/twake/backend/node/config/default.json</a></p><p>Copy the content of this file and put it in <code>[docker-compose.yml location]/configuration/backend-node/production.json</code></p><blockquote><p><strong>Tip:</strong> you can put a &#39;cert&#39; directory with apns.cert keys (mobile push notifications) beside the backend-node/production.json file.</p></blockquote><h4 id="backend-configuration-php-only-for-scalable-mode" tabindex="-1">Backend configuration, PHP (only for scalable mode) <a class="header-anchor" href="#backend-configuration-php-only-for-scalable-mode" aria-hidden="true">#</a></h4><p>An example is available here: <a href="https://github.com/TwakeApp/Twake/blob/main/twake/backend/core/app/Configuration/Parameters.php.dist" target="_blank" rel="noreferrer">https://github.com/TwakeApp/Twake/blob/main/twake/backend/core/app/Configuration/Parameters.php.dist</a></p><p>Copy the content of this file and put it in <code>[docker-compose.yml location]/configuration/backend/Parameters.php</code></p><blockquote><p><strong>Tip:</strong> you can also put a &#39;cert&#39; directory with apns.cert keys (mobile push notifications) beside the Parameters.php file.</p></blockquote><h4 id="frontend-configuration-only-for-scalable-mode" tabindex="-1">Frontend configuration (only for scalable mode) <a class="header-anchor" href="#frontend-configuration-only-for-scalable-mode" aria-hidden="true">#</a></h4><p>You can find an example of Twake configuration (default configuration) here: <a href="https://github.com/TwakeApp/Twake/blob/main/twake/frontend/src/app/environment/environment.ts.dist" target="_blank" rel="noreferrer">https://github.com/TwakeApp/Twake/blob/main/twake/frontend/src/app/environment/environment.ts.dist</a></p><p>Copy the content of this file and put it in <code>[docker-compose.yml location]/configuration/frontend/environment.ts</code></p><h4 id="after-a-configuration-change" tabindex="-1">After a configuration change <a class="header-anchor" href="#after-a-configuration-change" aria-hidden="true">#</a></h4><p>Each time you change the configuration, restart your docker container like this: </p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># In mongodb mode</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose restart node</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># In full scalable mode</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose restart nginx node</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose exec nginx yarn build #If you have custom frontend configuration</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If you are using ScyllaDB (mandatory for any version before 2022) you must make sure ScyllaDB is started before to start the node container.</p><p>If your server is completely stoped you can use this command to make sure everything starts well:</p><p><code>docker-compose up -d scylladb; sleep 120; docker-compose up -d</code></p></div>`,18),i=[r];function c(s,d,p,l,u,f){return a(),n("div",null,i)}const m=e(t,[["render",c]]);export{g as __pageData,m as default};

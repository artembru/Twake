import{_ as n,c as a,o as e,a as s}from"./app.73ebf130.js";const A=JSON.parse('{"title":"Installing Twake with LemonLDAP (LDAP, OpenID and more)","description":"Harder than KeyCloak but has other features, see official LemonLDAP site.","frontmatter":{"description":"Harder than KeyCloak but has other features, see official LemonLDAP site."},"headers":[],"relativePath":"onprem/configuration/authentication-modes/installing-twake-with-lemonldap-ldap-openid-and-more.md"}'),o={name:"onprem/configuration/authentication-modes/installing-twake-with-lemonldap-ldap-openid-and-more.md"},t=s(`<h1 id="installing-twake-with-lemonldap-ldap-openid-and-more" tabindex="-1">Installing Twake with LemonLDAP (LDAP, OpenID and more) <a class="header-anchor" href="#installing-twake-with-lemonldap-ldap-openid-and-more" aria-hidden="true">#</a></h1><h4 id="_1-twake-configuration" tabindex="-1">1. Twake configuration <a class="header-anchor" href="#_1-twake-configuration" aria-hidden="true">#</a></h4><p>Edit Twake PHP config <code>twake/backend/core/app/Configuration/Parameters.php</code>, in defaults.auth.openid</p><div class="language-text"><button class="copy"></button><span class="lang">text</span><pre><code><span class="line"><span style="color:#A6ACCD;">&quot;openid&quot; =&gt; [</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;use&quot; =&gt; true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;provider_uri&quot; =&gt; &#39;http://auth.open-paas.org.local&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;client_id&quot; =&gt; &#39;twake&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;client_secret&quot; =&gt; &#39;secret&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;ignore_mail_verified&quot; =&gt; true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;ignore_id_token_verification&quot; =&gt; true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;provider_config&quot; =&gt; [</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;token_endpoint&quot;=&gt; &quot;http://auth.open-paas.org.local/oauth2/token&quot;, //token_endpoint</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;userinfo_endpoint&quot; =&gt; &quot;http://auth.open-paas.org.local/oauth2/userinfo&quot;,//userinfo_endpoint</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;end_session_endpoint&quot; =&gt; &quot;http://auth.open-paas.org.local/oauth2/logout&quot;,//end_session_endpoint</span></span>
<span class="line"><span style="color:#A6ACCD;">      &quot;authorization_endpoint&quot; =&gt; &quot;http://auth.open-paas.org.local/oauth2/authorize&quot;,//authorization_endpoint</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">],</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Add line to /etc/hosts if needed :</p><p><code>sudo docker-compose exec php bash -c &quot;echo &#39;51.210.124.92 manager.open-paas.org.local auth.open-paas.org.local reload.open-paas.org.local&#39; &gt;&gt; /etc/hosts&quot;</code></p><h4 id="_2-lemon-ldap-configuration" tabindex="-1">2. Lemon LDAP configuration <a class="header-anchor" href="#_2-lemon-ldap-configuration" aria-hidden="true">#</a></h4><p>Dans ClientOpenIDConnect &gt; twake &gt; Options &gt; Basique &gt; Adresse connexion : <a href="http://15.236.209.74/ajax/users/openid" target="_blank" rel="noreferrer">http://15.236.209.74/ajax/users/openid</a></p><p>Dans ClientOpenIDConnect &gt; twake &gt; Attributs export\xE9s :</p><div class="language-text"><button class="copy"></button><span class="lang">text</span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  email_verified: email_verified,</span></span>
<span class="line"><span style="color:#A6ACCD;">  picture: picture,</span></span>
<span class="line"><span style="color:#A6ACCD;">  name: cn,</span></span>
<span class="line"><span style="color:#A6ACCD;">  given_name: givenName,</span></span>
<span class="line"><span style="color:#A6ACCD;">  family_name: sn,</span></span>
<span class="line"><span style="color:#A6ACCD;">  email: mail,</span></span>
<span class="line"><span style="color:#A6ACCD;">  sub: uid</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>[Ne marche pas pour le moment] Dans ClientOpenIDConnect &gt; twake &gt; Options &gt; D\xE9connexion &gt; Adresse : <a href="http://15.236.209.74/ajax/users/openid/logout_success" target="_blank" rel="noreferrer">http://15.236.209.74/ajax/users/openid/logout_success</a></p>`,11),p=[t];function l(i,r,c,d,u,h){return e(),a("div",null,p)}const C=n(o,[["render",l]]);export{A as __pageData,C as default};
